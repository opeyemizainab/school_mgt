{% extends "base.html" %}
{% block content %}
<div class="container mt-4">
    <h2>{{ student.user.get_full_name }}'s Results ({{ term.name }} â€¢ {{ session.name }})</h2>

    <table class="table table-bordered align-middle">
        <thead class="table-dark">
            <tr>
                <th>Subject</th>
                <th>Test Score</th>
                <th>Exam Score</th>
                <th>Total</th>
                <th>Grade</th>
                <th>Comment</th>
                <th>Status</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            {% for result in results %}
                <tr>
                    <td>{{ result.subject.name }}</td>
                    <td>{{ result.test_score }}</td>
                    <td>{{ result.exam_score }}</td>
                    <td>{{ result.total_score }}</td>
                    <td>{{ result.grade }}</td>
                    <td>{{ result.comment }}</td>
                    <td>
                        {% if result.locked %}
                            <span class="badge bg-danger">Locked</span>
                        {% else %}
                            <span class="badge bg-success">Unlocked</span>
                        {% endif %}
                    </td>
                    <td>
                        {% if not result.locked %}
                            <a href="{% url 'admin_edit_result' result.id %}" class="btn btn-sm btn-warning">
                                Edit
                            </a>
                        {% else %}
                            <button class="btn btn-sm btn-secondary" disabled>Edit</button>
                        {% endif %}
                    </td>
                </tr>
            {% empty %}
                <tr>
                    <td colspan="8" class="text-center">No results found.</td>
                </tr>
            {% endfor %}
        </tbody>
    </table>

    <a href="{% url 'admin_view_results' %}?class_id={{ student.classroom.id }}&term_id={{ term.id }}&session_id={{ session.id }}"
       class="btn btn-secondary">
       Back to List
    </a>
</div>
{% endblock %}
